import CommentsPage from '../component/CommentsPage';
import MentionsPage from '../component/MentionsPage';
import NotificationsPage from '../component/NotificationsPage';
import PrivateMessagesPage from '../component/PrivateMessagesPage';
import { router } from '@kit.ArkUI';
import { BusinessError } from '@kit.BasicServicesKit';


@Entry
@Component
export default struct Messages {
  @State currentTab: string = 'private' // å½“å‰é€‰ä¸­çš„æ ‡ç­¾
  @State searchText: string = '' // æœç´¢æ–‡æœ¬
  @State currentNav: string = 'message' // å½“å‰å¯¼èˆª
  @State isPressed: boolean = false

  // æ„å»ºæ ‡ç­¾é¡¹
  @Builder
  buildTabItem(label: string, tabName: string) {
    Column() {
      Text(label)
        .fontSize(18)
        .fontWeight(800)
        .fontColor(this.currentTab === tabName ? '#FFFFFF' : '#999999')
      if (this.currentTab === tabName) {
        Divider()
          .color('#FFFF')
          .strokeWidth(2)
          .width(24)
          .margin({ top: 4 })
      }
    }
    .height('100%')
    .justifyContent(FlexAlign.Center)
    .onClick(() => {
      this.currentTab = tabName
    })
  }

  // // æ„å»ºå¯¼èˆªé¡¹
  // @Builder
  // buildNavItem(label: string, navName: string) {
  //   Column() {
  //     Text(this.getNavIcon(navName))
  //       .fontSize(24)
  //       .fontColor(this.currentNav === navName ? '#FFFFFF' : '#999999')
  //     Text(label)
  //       .fontSize(10)
  //       .fontColor(this.currentNav === navName ? '#FFFFFF' : '#999999')
  //       .margin({ top: 2 })
  //   }
  //   .layoutWeight(1)
  //   .height('100%')
  //   .justifyContent(FlexAlign.Center)
  //   .onClick(() => {
  //     this.currentNav = navName
  //   })
  // }
  //
  // // è·å–å¯¼èˆªå›¾æ ‡
  // private getNavIcon(navName: string): string {
  //   switch (navName) {
  //     case 'home':
  //       return 'ğŸ '
  //     case 'explore':
  //       return 'ğŸ”'
  //     case 'create':
  //       return 'â•'
  //     case 'message':
  //       return 'ğŸ’¬'
  //     case 'profile':
  //       return 'ğŸ‘¤'
  //     default:
  //       return ''
  //   }
  // }

  build() {
    // Stack() {
      Column() {
        // é¡¶éƒ¨æ 
        Row() {
          Text('â†')
            .fontSize(24)
            .fontColor('#fff')
            .margin({ left: 16 })
            .onClick(()=>{
              router.pushUrl({
                url: 'Discover/pages/Discover'
              }).then(() => {
                console.info('push page success');
              }).catch((err: BusinessError) => {
                console.error(`pushUrl failed, code is ${err.code}, message is ${err.message}`);
              })
            })
          Blank().layoutWeight(1)
          Text('æ¶ˆæ¯')
            .fontSize(20)
            .fontColor('#fff')
            .fontWeight(FontWeight.Bold)
            .margin({ right: 16 })
          Blank().layoutWeight(1)
          Text('âœï¸')
            .fontSize(20)
            .margin({ right: 16 })
        }
        .width('100%')
        .height(48)
        .alignItems(VerticalAlign.Center)
        .backgroundColor('#00000')

        // é¡¶éƒ¨æ ‡ç­¾é¡µ
        Row() {
          this.buildTabItem('ç§ä¿¡', 'private')
          this.buildTabItem('é€šçŸ¥', 'notice')
          this.buildTabItem('@æˆ‘', 'mention')
          this.buildTabItem('è¯„è®º', 'like')
        }
        .width('100%')
        .height(56)
        .justifyContent(FlexAlign.SpaceAround)
        .backgroundColor('#0000')

        // æœç´¢æ 
        Row() {
          Text('ğŸ”')
            .fontSize(20)
            .margin({ left: 12 })
          TextInput({ placeholder: 'æœç´¢' })
            .placeholderFont({ size: 14 })
            .placeholderColor('#666666')
            .textAlign(TextAlign.Start)
            .height(36)
            .layoutWeight(1)
            .margin({ left: 8, right: 12 })
            .onChange((value: string) => {
              this.searchText = value
            })
        }
        .width('96%')
        .borderRadius(18)
        .backgroundColor('#333333')
        .margin({ left: 12, right: 12, top: 8 })

        // å†…å®¹åŒºåŸŸ
        Column() {
          if (this.currentTab === 'private') {
            PrivateMessagesPage()   // ç§ä¿¡
          } else if (this.currentTab === 'notice') {
            NotificationsPage()     // é€šçŸ¥
          } else if (this.currentTab === 'mention') {
            MentionsPage()          // @æˆ‘
          } else if (this.currentTab === 'like') {
            CommentsPage()          // è¯„è®º
          }
        }
        .width('100%')
        .padding({ top: 16 })
        .layoutWeight(1)
      }
      .width('100%')
      .height('100%')
      .backgroundColor(Color.Black)

      // // åº•éƒ¨å¯¼èˆªæ 
      // Row() {
      //   this.buildNavItem('é¦–é¡µ', 'home')
      //   this.buildNavItem('å‘ç°', 'explore')
      //   this.buildNavItem('åˆ›å»º', 'create')
      //   this.buildNavItem('æ¶ˆæ¯', 'message')
      //   this.buildNavItem('æˆ‘', 'profile')
      // }
      // .width('100%')
      // .height(56)
      // .backgroundColor(Color.Black)
      // .alignItems(VerticalAlign.Center)
      // .position({ x: 0, y: '100%' })
      // .translate({ y: -56 })
    // }
    // .width('100%')
    // .height('100%')
  }
}


